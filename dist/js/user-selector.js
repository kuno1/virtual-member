!function(){"use strict";var e=window.React;const{useState:t,useEffect:n}=wp.element,{Button:a,Icon:o,ComboboxControl:r}=wp.components,{apiFetch:l}=wp,c=({user:t,onUserDelete:n})=>(0,e.createElement)(a,{className:"kvm-user-token",onClick:()=>n(t),iconPosition:"right",variant:"secondary"},t.name,(0,e.createElement)("small",null,"(",t.group.length>0?t.group.map((e=>e.name)).join(", "):"---",")"),(0,e.createElement)(o,{icon:"no-alt"})),s=({onUserSelected:a})=>{const[o,c]=t(""),[s,m]=t([]),[i,u]=t(null),[p,h]=t(null);return n((()=>{p&&clearTimeout(p),h(setTimeout((()=>{if(o){const e=async()=>{const e=await l({path:`/kvm/v1/authors/search?s=${o}`});m(e)};try{e()}catch(e){m([])}}else m([])}),300))}),[o]),(0,e.createElement)(r,{label:KvmUserSelector.slabel,placeholder:KvmUserSelector.search,value:i,options:s.map((e=>({label:e.name,value:e.id}))),onChange:e=>{s.forEach((t=>{t.id===e&&a(t)})),u("")},onFilterValueChange:e=>c(e)})},m=window.kvm||{};m.UserSelectorComponent=({post:a,onUserChange:o})=>{const[r,m]=t([]);return n((()=>{(async()=>{try{const e=await l({path:`/kvm/v1/authors/of/${a}`});m(e)}catch(e){alert(e.message||"Error")}})()}),[]),n((()=>{o(r)}),[r]),(0,e.createElement)(e.Fragment,null,r.length>0?(0,e.createElement)("div",{className:"kvm-user-token-wrapper"},r.map((t=>(0,e.createElement)(c,{key:t.id,user:t,onUserDelete:e=>(e=>{const t=[];r.map((n=>(n.id!==e.id&&t.push(n),n))),m(t)})(e)})))):(0,e.createElement)("div",{className:"notice notice-error notice-alt"},(0,e.createElement)("p",null,KvmUserSelector.nouser)),(0,e.createElement)(s,{onUserSelected:e=>{r.map((e=>e.id)).includes(e.id)||m(r.concat([e]))}}))},window.kvm=m}();